[pytest]
# Disable output capture to avoid "I/O operation on closed file" error
# This issue occurs because test scripts rebind sys.stdout/stderr with io.TextIOWrapper,
# which can close pytest's internal capture tmpfile when garbage collected.
addopts = --capture=no
    --ignore=tests/is_EUR_work/tests/test_analyze_r2_issue.py
    --ignore=tests/is_EUR_work/tests/test_basic_validation.py
    --ignore=tests/is_EUR_work/tests/test_eur_sampling_evaluation.py
    --ignore=tests/is_EUR_work/tests/test_sensitive_region_analysis.py
    --ignore=tests/is_EUR_work/tests/test_diagnose_x17_issue.py
    --ignore=tests/is_EUR_work/tests/test_historical_exclusion.py

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Test paths - only search in specific test directories
testpaths = tests/is_EUR_work/tests

# Exclude directories that are not tests or have import errors
norecursedirs = .git .pixi __pycache__ tools archive
    extensions/warmup_budget_check
    extensions/custom_factory/tests
    extensions/custom_generators
    extensions/custom_likelihood/tests
    extensions/custom_mean/tests
    extensions/dynamic_eur_acquisition
    extensions/config_builder/tests
    tests/is_EUR_work/archive
    tests/is_EUR_work/00_plans
    tests/is_EUR_work/debug
    tests/is_EUR_work/tests/20251210_likert_distribution_test
    tests/is_EUR_work/tests/20251209_likert_sensitivity_test
    tests/is_EUR_work/tests/20251209_205524_dedup_implementation
    tests/is_EUR_work/tests/20251210_100524_pool_constraint_diagnosis

# Console output options
console_output_style = progress
log_cli = false
