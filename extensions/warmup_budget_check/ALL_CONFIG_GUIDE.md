# ALL_CONFIG ä½¿ç”¨æŒ‡å—

> **å¿«é€Ÿé…ç½®æ‰€æœ‰æ­¥éª¤çš„å‚æ•°ï¼Œä¸€å¤„ä¿®æ”¹ï¼Œå…¨å±€ç”Ÿæ•ˆ**

## ğŸ“‹ æ¦‚è¿°

`ALL_CONFIG` æ˜¯ `quick_start.py` ä¸­çš„**ç»Ÿä¸€é…ç½®ä¸­å¿ƒ**ï¼Œè®©ä½ åœ¨ä¸€ä¸ªåœ°æ–¹ç®¡ç†æ‰€æœ‰å®éªŒå‚æ•°ï¼Œé¿å…åœ¨å¤šä¸ª STEP é…ç½®ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### **åŸºç¡€ä½¿ç”¨ï¼šåªä¿®æ”¹ ALL_CONFIG**

```python
# åœ¨ quick_start.py ä¸­ä¿®æ”¹ ALL_CONFIG
MODE = "all"

ALL_CONFIG = {
    # åªéœ€ä¿®æ”¹è¿™é‡Œï¼Œæ‰€æœ‰æ­¥éª¤è‡ªåŠ¨æ›´æ–°
    "n_subjects": 10,                    # Phase 1 è¢«è¯•æ•°
    "trials_per_subject": 25,            # æ¯äººè¯•éªŒæ¬¡æ•°
    "individual_std_percent": 0.4,       # è¢«è¯•é—´å·®å¼‚ï¼ˆå…³é”®å‚æ•°ï¼‰
    "likert_sensitivity": 2.0,           # Likertçµæ•åº¦
    "phase2_n_subjects": 20,             # Phase 2 è¢«è¯•æ•°
    # ... å…¶ä»–å‚æ•°è§ä¸‹æ–‡
}
```

è¿è¡Œï¼š
```bash
python quick_start.py
```

---

## ğŸ“Š å‚æ•°åˆ†ç±»è¯¦è§£

### **1. æµç¨‹æ§åˆ¶**

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|--------|------|
| `base_output_dir` | `phase1_analysis_output` | æ‰€æœ‰ç»“æœçš„æ ¹ç›®å½• |
| `run_step1_5` | `True` | æ˜¯å¦è‡ªåŠ¨è¿è¡Œæ¨¡æ‹Ÿï¼ˆStep1.5ï¼‰ |
| `step1_5_use_result_dir_for_step2` | `True` | Step2æ˜¯å¦ä½¿ç”¨Step1.5ç»“æœ |

### **2. è®¾è®¡ç©ºé—´ä¸é¢„ç®— (Step1)**

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|--------|------|
| `design_csv` | CSVè·¯å¾„ | è®¾è®¡ç©ºé—´æ–‡ä»¶ï¼ˆåŒ…å«æ‰€æœ‰å› å­æ°´å¹³ï¼‰ |
| `n_subjects` | `5` | Phase 1 è¢«è¯•æ•°é‡ |
| `trials_per_subject` | `30` | æ¯ä¸ªè¢«è¯•çš„æµ‹è¯•æ¬¡æ•° |
| `skip_interaction` | `False` | æ˜¯å¦è·³è¿‡äº¤äº’æ•ˆåº”æ¢ç´¢ |
| `auto_confirm` | `True` | æ˜¯å¦è‡ªåŠ¨ç¡®è®¤ï¼ˆä¸è¯¢é—®ï¼‰ |

### **3. æ¨¡æ‹Ÿè¢«è¯•å‚æ•° (Step1.5)** â­ **é‡ç‚¹**

#### **è¢«è¯•é—´å·®å¼‚æ§åˆ¶**

| å‚æ•° | é»˜è®¤å€¼ | æ¨èèŒƒå›´ | è¯´æ˜ |
|-----|--------|---------|------|
| `population_std` | `0.4` | 0.3-0.5 | ç¾¤ä½“æƒé‡åˆ†å¸ƒçš„æ ‡å‡†å·® |
| `individual_std_percent` | `0.4` | **0.3-0.5** | **ä¸ªä½“å·®å¼‚æ¯”ä¾‹ï¼ˆå…³é”®ï¼ï¼‰** |
| `population_mean` | `0.0` | 0.0 | ç¾¤ä½“æƒé‡å‡å€¼ |
| `individual_corr` | `0.0` | 0.0-0.3 | ç‰¹å¾é—´ç›¸å…³æ€§ |

**é‡è¦å…¬å¼**ï¼š
```
ä¸ªä½“æ ‡å‡†å·® = individual_std_percent Ã— population_std
ä¾‹å¦‚: 0.4 Ã— 0.4 = 0.16
```

**è°ƒå‚å»ºè®®**ï¼š
- `individual_std_percent = 0.3` â†’ è¢«è¯•é—´å·®å¼‚å°ï¼ˆSD~0.5-0.6ï¼‰
- `individual_std_percent = 0.4` â†’ è¢«è¯•é—´å·®å¼‚é€‚ä¸­ï¼ˆSD~0.6-0.8ï¼‰âœ… **æ¨è**
- `individual_std_percent = 0.5` â†’ è¢«è¯•é—´å·®å¼‚è¾ƒå¤§ï¼ˆSD~0.8-1.0ï¼‰
- `individual_std_percent = 1.0` â†’ è¢«è¯•é—´å·®å¼‚è¿‡å¤§ï¼ˆSD>1.2ï¼‰âŒ **ä¸æ‹ŸçœŸ**

#### **Likert é‡è¡¨é…ç½®**

| å‚æ•° | é»˜è®¤å€¼ | æ¨èèŒƒå›´ | è¯´æ˜ |
|-----|--------|---------|------|
| `likert_levels` | `5` | 5 or 7 | Likerté‡è¡¨ç­‰çº§æ•° |
| `likert_mode` | `"tanh"` | tanh | tanh=æ‹ŸçœŸ / percentile=å‡åŒ€ |
| `likert_sensitivity` | `2.0` | **1.5-2.5** | çµæ•åº¦ï¼ˆè¶Šé«˜è¶Šé›†ä¸­äºä¸­é—´å€¼ï¼‰ |

**è°ƒå‚å»ºè®®**ï¼š
- `likert_sensitivity = 1.0` â†’ åˆ†å¸ƒè¾ƒå¹³å¦ï¼Œæ˜“å‡ºç°æç«¯å€¼
- `likert_sensitivity = 2.0` â†’ æ‹ŸçœŸåˆ†å¸ƒï¼Œä¸­é—´å€¼åå¤š âœ… **æ¨è**
- `likert_sensitivity = 3.0` â†’ é«˜åº¦é›†ä¸­äºä¸­é—´å€¼

#### **äº¤äº’æ•ˆåº”**

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|--------|------|
| `interaction_pairs` | `[(3,4), (0,1)]` | æŒ‡å®šäº¤äº’å¯¹ï¼ˆç´¢å¼•ä»0å¼€å§‹ï¼‰ |
| `num_interactions` | `0` | é¢å¤–éšæœºç”Ÿæˆçš„äº¤äº’é¡¹æ•° |
| `interaction_scale` | `0.25` | äº¤äº’æƒé‡å°ºåº¦ï¼ˆ0.2-0.3æ¨èï¼‰ |

**ç¤ºä¾‹**ï¼š
```python
# æŒ‡å®š x3 ä¸ x4 äº¤äº’ï¼Œx0 ä¸ x1 äº¤äº’
"interaction_pairs": [(3, 4), (0, 1)],
```

### **4. Phase 2 å‚æ•° (Step2)**

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|--------|------|
| `max_pairs` | `5` | æœ€å¤šé€‰æ‹©çš„äº¤äº’å¯¹æ•°é‡ |
| `min_pairs` | `2` | æœ€å°‘é€‰æ‹©çš„äº¤äº’å¯¹æ•°é‡ |
| `selection_method` | `"elbow"` | é€‰æ‹©æ–¹æ³•: elbow/bic_threshold/top_k |
| `phase2_n_subjects` | `20` | Phase 2 è¢«è¯•æ•°é‡ |
| `phase2_trials_per_subject` | `25` | Phase 2 æ¯äººæµ‹è¯•æ¬¡æ•° |
| `lambda_adjustment` | `1.2` | Î»è°ƒæ•´ç³»æ•°ï¼ˆ>1.0å¢å¼ºäº¤äº’æ¢ç´¢ï¼‰ |

### **5. Base GP å‚æ•° (Step3)**

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|-----|--------|------|
| `max_iters` | `200` | GPè®­ç»ƒè¿­ä»£æ•°ï¼ˆæµ‹è¯•ç”¨200ï¼Œæ­£å¼ç”¨300+ï¼‰ |
| `learning_rate` | `0.05` | å­¦ä¹ ç‡ |
| `use_cuda` | `False` | æ˜¯å¦ä½¿ç”¨GPU |
| `ensure_diversity` | `True` | ç¡®ä¿é‡‡æ ·ç‚¹å¤šæ ·æ€§ |

---

## ğŸ”§ ä½¿ç”¨åœºæ™¯

### **åœºæ™¯1ï¼šå¿«é€Ÿæµ‹è¯•ï¼ˆæœ€å°é¢„ç®—ï¼‰**

```python
ALL_CONFIG = {
    "n_subjects": 3,                # ä»…3ä¸ªè¢«è¯•
    "trials_per_subject": 20,       # æ¯äºº20æ¬¡
    "individual_std_percent": 0.4,
    "max_iters": 100,               # å¿«é€Ÿè®­ç»ƒ
}
```

### **åœºæ™¯2ï¼šæ‹ŸçœŸæ¨¡æ‹Ÿï¼ˆæ¨èé…ç½®ï¼‰**

```python
ALL_CONFIG = {
    "n_subjects": 5,                    # 5ä¸ªè¢«è¯•
    "trials_per_subject": 30,           # æ¯äºº30æ¬¡
    "individual_std_percent": 0.4,      # é€‚ä¸­å·®å¼‚ âœ…
    "likert_sensitivity": 2.0,          # æ‹ŸçœŸåˆ†å¸ƒ âœ…
    "interaction_pairs": [(3,4), (0,1)],
    "max_iters": 200,
}
```

### **åœºæ™¯3ï¼šé«˜å¼‚è´¨æ€§ç¾¤ä½“ï¼ˆä¸´åºŠç ”ç©¶ï¼‰**

```python
ALL_CONFIG = {
    "n_subjects": 10,               # æ›´å¤šè¢«è¯•
    "individual_std_percent": 0.6,  # é«˜ä¸ªä½“å·®å¼‚ï¼ˆä¸´åºŠç¾¤ä½“ï¼‰
    "likert_sensitivity": 1.5,      # å…è®¸æ›´å¤šæç«¯å“åº”
}
```

### **åœºæ™¯4ï¼šæ­£å¼å®éªŒï¼ˆå¤§é¢„ç®—ï¼‰**

```python
ALL_CONFIG = {
    "n_subjects": 10,
    "trials_per_subject": 50,
    "phase2_n_subjects": 30,
    "phase2_trials_per_subject": 40,
    "max_iters": 500,               # å……åˆ†è®­ç»ƒ
    "use_cuda": True,               # ä½¿ç”¨GPUåŠ é€Ÿ
}
```

---

## ğŸ¨ é«˜çº§ç”¨æ³•

### **æ–¹æ³•1ï¼šåµŒå¥—å­—å…¸è¦†ç›–ï¼ˆç²¾ç»†æ§åˆ¶ï¼‰**

å¦‚æœä½ éœ€è¦ä¿®æ”¹æŸä¸ªæ­¥éª¤çš„ç‰¹æ®Šå‚æ•°ï¼š

```python
ALL_CONFIG = {
    # å…¨å±€å‚æ•°
    "n_subjects": 5,

    # Step1 ç‰¹æ®Šé…ç½®
    "step1": {
        "merge": True,          # åˆå¹¶ä¸ºå•ä¸ªCSV
        "subject_col_name": "subj_id",
    },

    # Step1.5 ç‰¹æ®Šé…ç½®
    "step1_5": {
        "output_mode": "both",  # åŒæ—¶è¾“å‡ºå•ç‹¬å’Œåˆå¹¶æ–‡ä»¶
        "clean": False,         # ä¸æ¸…ç†æ—§ç»“æœ
    },
}
```

### **æ–¹æ³•2ï¼šåŠ¨æ€ä¿®æ”¹ design_csv**

```python
from pathlib import Path

ALL_CONFIG = {
    "design_csv": str(Path.home() / "my_experiment" / "design_space.csv"),
}
```

---

## ğŸ“ˆ å‚æ•°å½±å“åˆ†æ

### **ä¸ªä½“å·®å¼‚å‚æ•°çš„å½±å“**

| `individual_std_percent` | è¢«è¯•é—´SD | æ‰¹æ¬¡æ•ˆåº” | æ‹ŸçœŸæ€§ |
|-------------------------|---------|---------|-------|
| 0.2 | 0.4-0.5 | ~0.2 | è¿‡äºä¸€è‡´ |
| 0.3 | 0.5-0.6 | ~0.3 | è¾ƒä¸ºæ‹ŸçœŸ âœ… |
| **0.4** | **0.6-0.8** | **~0.4** | **æ¨è** âœ…âœ… |
| 0.5 | 0.8-1.0 | ~0.6 | å·®å¼‚åå¤§ |
| 0.6 | 1.0-1.2 | ~0.8 | å·®å¼‚è¿‡å¤§ |
| 1.0 | >1.2 | >1.0 | ä¸æ‹ŸçœŸ âŒ |

### **Likert çµæ•åº¦çš„å½±å“**

| `likert_sensitivity` | å“åº”åˆ†å¸ƒ | æç«¯å“åº”ç‡ | æ¨èåœºæ™¯ |
|---------------------|---------|-----------|---------|
| 0.5 | è¾ƒå¹³å¦ | é«˜ | åå¥½åˆ¤æ–­ |
| 1.0 | ä¸­ç­‰ | ä¸­ç­‰ | - |
| **2.0** | **ä¸­å¿ƒé›†ä¸­** | **ä½** | **å¿ƒç†ç‰©ç†å®éªŒ** âœ… |
| 3.0 | é«˜åº¦é›†ä¸­ | æä½ | å¾®å°å·®å¼‚æ£€æµ‹ |

---

## âœ… æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä¿®æ”¹ ALL_CONFIG**
   - âœ… åœ¨ `ALL_CONFIG` ä¸­è®¾ç½®å‚æ•°ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰
   - âŒ ä¸è¦åŒæ—¶ä¿®æ”¹ `ALL_CONFIG` å’Œ `STEP_CONFIG`ï¼ˆå®¹æ˜“æ··ä¹±ï¼‰

2. **å…³é”®å‚æ•°è°ƒä¼˜é¡ºåº**
   ```
   1. individual_std_percent (0.3-0.5)
   2. likert_sensitivity (1.5-2.5)
   3. interaction_pairs (æ ¹æ®ç ”ç©¶å‡è®¾)
   4. phase2_n_subjects (æ ¹æ®é¢„ç®—)
   ```

3. **éªŒè¯æµç¨‹**
   ```bash
   # ä¿®æ”¹ ALL_CONFIG
   # è¿è¡Œå®éªŒ
   python quick_start.py

   # æ£€æŸ¥æŠ¥å‘Šä¸­çš„æ‰¹æ¬¡æ•ˆåº”
   cat phase1_analysis_output/[æ—¶é—´æˆ³]/step2/phase1_analysis_report.md

   # å¦‚æœæ‰¹æ¬¡æ•ˆåº” > 0.5ï¼Œé™ä½ individual_std_percent
   # å¦‚æœæ‰¹æ¬¡æ•ˆåº” < 0.2ï¼Œå¯ä»¥é€‚å½“æé«˜
   ```

4. **è°ƒè¯•å»ºè®®**
   - ä½¿ç”¨å°é¢„ç®—æµ‹è¯•ï¼ˆ`n_subjects=3, trials_per_subject=20`ï¼‰
   - ç¡®è®¤å‚æ•°ç¬¦åˆé¢„æœŸåå†å¢åŠ é¢„ç®—

---

## ğŸ” å¸¸è§é—®é¢˜

### **Q1: ä¿®æ”¹ ALL_CONFIG åå‚æ•°æ²¡ç”Ÿæ•ˆï¼Ÿ**

**A:** æ£€æŸ¥æ˜¯å¦åœ¨ `ALL_CONFIG` ä¹‹ååˆä¿®æ”¹äº† `STEP_CONFIG`ã€‚è§£å†³æ–¹æ³•ï¼šåªä¿®æ”¹ `ALL_CONFIG`ã€‚

### **Q2: æ‰¹æ¬¡æ•ˆåº”ä»ç„¶å¾ˆé«˜ï¼ˆ>1.0ï¼‰ï¼Ÿ**

**A:** é™ä½ `individual_std_percent`ï¼š
```python
"individual_std_percent": 0.3,  # ä» 0.4 é™åˆ° 0.3
```

### **Q3: è¢«è¯•å“åº”å‡ ä¹å®Œå…¨ç›¸åŒï¼Ÿ**

**A:** æé«˜ `individual_std_percent` å’Œæ£€æŸ¥ `noise_std`ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰ã€‚

### **Q4: å¦‚ä½•è®© Step1 å’Œ Step3 ä½¿ç”¨ä¸åŒçš„è®¾è®¡ç©ºé—´ï¼Ÿ**

**A:** ä½¿ç”¨ç‰¹æ®Šè¦†ç›–ï¼š
```python
ALL_CONFIG = {
    "design_csv": "design1.csv",  # Step1 ç”¨è¿™ä¸ª
    "step3_design_space_csv": "design2.csv",  # Step3 ç”¨è¿™ä¸ª
}
```

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- **æ‰¹æ¬¡æ•ˆåº”è§£é‡Š**: æŸ¥çœ‹ä¸»æŠ¥å‘Šä¸­çš„"æ•°æ®è´¨é‡æŒ‡æ ‡"éƒ¨åˆ†
- **äº¤äº’å¯¹ç­›é€‰**: æŸ¥çœ‹ `phase1_analysis_report.md` ä¸­çš„"äº¤äº’å¯¹ç­›é€‰ç»“æœ"
- **å®Œæ•´é…ç½®**: å‚è€ƒ `quick_start.py` ä¸­çš„æ³¨é‡Š

---

**æœ€åæ›´æ–°**: 2025-12-01
**ç‰ˆæœ¬**: 2.0
