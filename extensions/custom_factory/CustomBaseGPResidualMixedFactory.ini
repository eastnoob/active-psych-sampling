# CustomBaseGPResidualMixedFactory Configuration
# 支持混合连续+离散参数的残差学习工厂
# 使用 ProductKernel(Matern × CategoricalKernel) 处理混合参数空间
#
# 核心特性：
# - 连续参数: 使用Matern(nu=2.5)核函数处理
# - 离散参数: 使用CategoricalKernel处理
# - Mean模块: BaseGP均值或BaseGP均值+偏移
# - Covariance模块: 两个核函数的乘积
#
# 维度信息从 [common] 部分的 n_params 或 parnames 自动获取

[CustomBaseGPResidualMixedFactory]
# 连续参数的参数名列表
# 类型: list[str] (必需)
# 说明: 指定哪些参数是连续的（使用Matern核）
# 格式: Python列表格式，例如 ['x1', 'x2', 'x3']
# 范围: 参数名必须是有效的标识符
# 注意: 这些参数在train_X中的列位置决定了active_dims
continuous_params = ['x1', 'x2', 'x3']

# 离散参数的参数配置
# 类型: dict[str, int] (必需)
# 说明: 指定离散参数及其取值个数
# 格式: Python字典格式，例如 {'param1': 3, 'param2': 4}
# 范围: 值应为正整数，表示该离散参数有多少个类别
# 注意: 离散参数在train_X中的列位置接在连续参数之后
discrete_params = {'category1': 3, 'category2': 4}

# BaseGP设计空间扫描CSV文件路径 (可选，用于mean预测)
# 类型: str (可选)
# 说明: 若指定，将使用BaseGP均值；若不指定，使用默认mean
# 范围: 任何有效的文件路径或 None
basegp_scan_csv = path/to/design_space_scan.csv

# Mean函数类型
# 类型: str (可选)
# 默认值: pure_residual
# 选项:
#   - pure_residual: BaseGP均值直接作为mean (无额外参数)
#   - learned_offset: BaseGP均值 + 可学习偏移 (增加1个参数)
# 说明: 选择mean模块的类型
mean_type = pure_residual

# Offset参数的先验标准差 (仅当 mean_type=learned_offset 时有效)
# 类型: float (可选)
# 默认值: 0.10
# 范围: 0.01 - 1.0
# 说明: 控制offset参数的先验强度
offset_prior_std = 0.10

# Lengthscale先验类型 (仅对连续参数)
# 类型: str (可选)
# 默认值: lognormal
# 选项:
#   - lognormal: LogNormal先验，自动调整 loc += log(dim_cont)/2
#   - gamma: Gamma先验 (concentration=3.0, rate=6.0)
#   - invgamma: 逆Gamma先验 (concentration=3.0, rate=1.0)
# 说明: 对连续参数lengthscale的约束
lengthscale_prior = lognormal

# Lengthscale LogNormal先验的位置参数 (仅对连续参数, lengthscale_prior=lognormal)
# 类型: list[float] (可选)
# 默认值: [sqrt(2.0)] * len(continuous_params)
# 说明: LogNormal先验的mean参数
#   - 实际使用时会自动加上 log(n_continuous)/2 的调整
#   - 列表长度应等于连续参数的个数
# 范围: 通常 [0.5, 2.0] 之间
ls_loc = [1.414, 1.414, 1.414]

# Lengthscale LogNormal先验的尺度参数 (仅对连续参数, lengthscale_prior=lognormal)
# 类型: list[float] (可选)
# 默认值: [sqrt(3.0)] * len(continuous_params)
# 说明: LogNormal先验的std参数，控制先验的宽度
#   - 列表长度应等于连续参数的个数
# 范围: 通常 [0.5, 2.0] 之间
ls_scale = [1.732, 1.732, 1.732]

# 是否固定核函数振幅
# 类型: bool (可选)
# 默认值: False
# 选项: True 或 False
# 说明: 是否为outputscale使用可学习参数
fixed_kernel_amplitude = False

# Outputscale先验类型 (仅当 fixed_kernel_amplitude=False 时有效)
# 类型: str (可选)
# 默认值: gamma
# 选项:
#   - gamma: Gamma先验 (concentration=2.0, rate=0.15)
#   - box: SmoothedBoxPrior (a=1, b=4)
# 说明: 对核函数振幅的先验约束
outputscale_prior = gamma

# 注意事项：
# 1. 维度信息必须在 [common] 部分定义 (n_params 或 parnames)
# 2. continuous_params 和 discrete_params 的总长度应等于 n_params
# 3. ls_loc 和 ls_scale 仅对连续参数，长度应等于 len(continuous_params)
# 4. discrete_params 中的值是该离散参数的类别数 (cardinality)
# 5. 在train_X中，连续参数排在前面，离散参数排在后面
# 6. 例如: continuous_params=['x1','x2'], discrete_params={'cat1':3}
#    则train_X的列顺序为 [x1_val, x2_val, cat1_val]
