# CustomBaseGPResidualFactory Configuration
# 使用BaseGP均值 + Lengthscale先验的协方差工厂
# 用于残差学习，支持纯残差和可学习偏移两种模式
#
# 核心特性：
# - Mean模块: BaseGP预测均值 (pure_residual) 或 BaseGP均值+偏移 (learned_offset)
# - Covariance模块: Matern(nu=2.5)核函数，带Lengthscale先验
# - 支持三种Lengthscale先验: LogNormal, Gamma, InvGamma
#
# 维度信息从 [common] 部分的 n_params 或 parnames 自动获取

[CustomBaseGPResidualFactory]
# BaseGP设计空间扫描CSV文件路径
# 类型: str (必需)
# 说明: 包含设计空间参数和BaseGP预测均值的CSV文件
# 范围: 任何有效的文件路径
basegp_scan_csv = path/to/design_space_scan.csv

# Mean函数类型
# 类型: str (可选)
# 默认值: pure_residual
# 选项: 
#   - pure_residual: 使用BaseGP均值直接作为mean (无额外参数)
#   - learned_offset: BaseGP均值 + 可学习偏移 (增加1个参数)
# 说明: 选择mean模块的类型
#   - pure_residual: 适合小样本（如30点），模型更稳定
#   - learned_offset: 需要建模全局偏移时选择
mean_type = pure_residual

# Offset参数的先验标准差 (仅当 mean_type=learned_offset 时有效)
# 类型: float (可选)
# 默认值: 0.10
# 范围: 0.01 - 1.0
# 说明: 控制offset参数的先验强度
#   - 较小值(如0.05): 强先验，限制全局偏移
#   - 中等值(如0.10): 推荐值，平衡先验强度
#   - 较大值(如0.20): 弱先验，允许较大偏移
offset_prior_std = 0.10

# Lengthscale先验类型
# 类型: str (可选)
# 默认值: lognormal
# 选项:
#   - lognormal: LogNormal先验，自动调整 loc += log(dim)/2
#   - gamma: Gamma先验 (concentration=3.0, rate=6.0)
#   - invgamma: 逆Gamma先验 (concentration=3.0, rate=1.0)
# 说明: 不同先验对lengthscale的约束程度不同
lengthscale_prior = lognormal

# Lengthscale LogNormal先验的位置参数 (当 lengthscale_prior=lognormal 时)
# 类型: list[float] (可选)
# 默认值: [sqrt(2.0), sqrt(2.0), ...] (重复dim次)
# 说明: LogNormal先验的mean参数
#   - 实际使用时会自动加上 log(dim)/2 的调整
#   - 需要为列表格式，长度应等于维度数
# 范围: 通常 [0.5, 2.0] 之间
ls_loc = [1.414]

# Lengthscale LogNormal先验的尺度参数 (当 lengthscale_prior=lognormal 时)
# 类型: list[float] (可选)
# 默认值: [sqrt(3.0), sqrt(3.0), ...] (重复dim次)
# 说明: LogNormal先验的std参数，控制先验的宽度
#   - 值越小，先验越窄（约束越强）
#   - 值越大，先验越宽（约束越弱）
# 范围: 通常 [0.5, 2.0] 之间
ls_scale = [1.732]

# 是否固定核函数振幅
# 类型: bool (可选)
# 默认值: False
# 选项: True 或 False
# 说明: 是否为outputscale使用可学习参数
#   - True: outputscale固定为1.0，不学习
#   - False: outputscale可学习，使用outputscale_prior约束
fixed_kernel_amplitude = False

# Outputscale先验类型 (仅当 fixed_kernel_amplitude=False 时有效)
# 类型: str (可选)
# 默认值: gamma
# 选项:
#   - gamma: Gamma先验 (concentration=2.0, rate=0.15)
#   - box: SmoothedBoxPrior (a=1, b=4)
# 说明: 对核函数振幅的先验约束
outputscale_prior = gamma

# 注意事项：
# 1. 维度信息必须在 [common] 部分定义 (n_params 或 parnames)
# 2. ls_loc 和 ls_scale 应为Python列表格式，例如: [1.414, 1.414]
# 3. 若为ARD (不同维度不同lengthscale)，列表长度应等于维度数
# 4. 若仅一个lengthscale值，可用单元素列表，会自动广播
